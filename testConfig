configuration TestConfig
{
    Import-DscResource -ModuleName PSDesiredStateConfiguration
    
    Node WebServer
    {
        WindowsFeature IIS
        {
            Ensure               = 'Present'
            Name                 = 'Web-Server'
            IncludeAllSubFeature = $true

        }
    }

    Node NotWebServer
    {
        WindowsFeature IIS
        {
            Ensure               = 'Absent'
            Name                 = 'Web-Server'

        }
    }
    
    Node TeamCityAgent
    {
        WindowsFeature IIS
        {
            Ensure               = 'Absent'
            Name                 = 'Web-Server'

        }
        
        Service TeamCityBuildAgent
        {
            Name                  = "TeamCity Build Agent"
            StartupType           = "Automatic"
            State                 = "Running"
        }
    }
}
